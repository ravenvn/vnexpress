try{(function(f,h,m,l){(function(){if("undefined"!==typeof localStorage)try{return localStorage.setItem("egguuu","yes"),"yes"===localStorage.getItem("egguuu")?(localStorage.removeItem("egguuu"),!0):!1}catch(a){return!1}else return!1})();m=f.dataLayer||{};l=[];for(var n in m)"vn_source"!=n&&"vn_campaign"!=n&&"vn_medium"!=n||l.push(n+"="+m[n]);var H=f.encodeURIComponent,L=f.decodeURIComponent,U=unescape,I=navigator,M=function(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="json";d.onload=
function(){var a=d.status;200===a?b(null,d.response):b(a,d.response)};d.onerror=function(){b("error",{})};d.send()},p=function(a){return(a=(new RegExp("(^|;)[ ]*"+a+"=([^;]*)")).exec(h.cookie))?L(a[2]):""},v=function(a,b,d,c){var e=document.domain.split(".");!d&&(d=0);!c&&(c=31449600);if(1<e.length&&b)for(var f="."+e[e.length-1],g=e.length-2;0<=g;g--){f="."+e[g]+f;var q=void 0,n=a,l=b,J=c,k=f;J&&(q=new Date,q.setTime(q.getTime()+1E3*J));h.cookie=n+"="+H(l)+(J?";expires="+q.toGMTString():"")+";path=/"+
(k?";domain="+k:"");if(p(a)==b){0==d&&(d=window,e=window.name,f=a,g=b,-1<e.indexOf("&"+f+"=")||0===e.indexOf(f+"=")?(q=e.indexOf("&"+f+"="),-1===q&&(q=e.indexOf(f+"=")),c=e.indexOf("&",q+1),c=-1!==c?e.substr(0,q)+e.substr(c+(q?0:1))+"&"+f+"="+g:e.substr(0,q)+"&"+f+"="+g):c=e+"&"+f+"="+g,d.name=c,window.localStorage&&"function"==typeof window.localStorage.setItem&&window.localStorage.setItem(a,b));break}}};n=function(){M("http://g.eclick.vn/iplocation",function(a,b){if(""==p("fosp_loc"))if(b.data&&
b.data.country_code)z=[b.data.province_id,b.data.region_id,b.data.country_code].join("-"),v("fosp_loc",z,0,86400);else{var d="https://ipinfo.io/json";b.ip&&(d="https://ipinfo.io/"+b.ip+"/json");M(d,function(a,b){b.region&&b.country&&""==p("fosp_loc")&&(z=[b.region,"0",b.country].join("-"),v("fosp_loc",z,0,86400))})}})};var z=p("fosp_loc");""==z&&n();var D=function(a){var b=p(a)||"",d=(new RegExp("(^|&)[ ]*"+a+"=([^&]*)","i")).exec(window.name);d=d&&2<d.length&&window.decodeURIComponent(d[2])||"";
var c="";window.localStorage&&"function"==typeof window.localStorage.getItem&&(c=window.localStorage.getItem(a));return b||c||d},N="---",O=function(){for(var a="",b=0;16>b;b++)a+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return a=a+"."+Math.floor((new Date).getTime()/1E3)};n=function(a){if(h.cookie!=N||2==a){N=h.cookie;var b=parseInt("0"+p("myvne_user_id"))||0,d=p("fosp_aid"),c=p("orig_aid");a=D("fosp_aid")||"";var e=D("orig_aid")||"";if(1E4<b)d!=b&&(v("fosp_aid",
b),d!=c&&(e=12<a.length?a:12<e.length?e:O(),v("orig_aid",e)));else if(""!=a&&a==parseInt("0"+a))v("fosp_aid",e);else if(""!=e&&e!=parseInt("0"+e))v("fosp_aid",e),v("orig_aid",e);else if(d!=c||""==d||""==c)b=12<a.length?a:12<e.length?e:O(),a!=b&&v("fosp_aid",b),e!=b&&v("orig_aid",b)}};"undefined"==typeof window.FospAnalyticsNew&&(f.setInterval(n,1E3),n(2));var E=!1,A=f._logEgg||(f._logEgg=[]);l=f.PAGE_DETAIL||0;a:{if(I=this.navigator)if(m=I.userAgent){var K=m;break a}K=""}var F=function(a){return-1!=
K.toLowerCase().indexOf(a.toLowerCase())},P=function(a){var b=function(a,b){return a<<b|a>>>32-b},d=function(a){var b="",c;for(c=7;0<=c;c--)b+=(a>>>4*c&15).toString(16);return b},c,e=[],f=1732584193,g=4023233417,q=2562383102,h=271733878,n=3285377520,l=[];a=U(H(a));var k=a.length;for(c=0;c<k-3;c+=4){var r=a.charCodeAt(c)<<24|a.charCodeAt(c+1)<<16|a.charCodeAt(c+2)<<8|a.charCodeAt(c+3);l.push(r)}switch(k&3){case 0:c=2147483648;break;case 1:c=a.charCodeAt(k-1)<<24|8388608;break;case 2:c=a.charCodeAt(k-
2)<<24|a.charCodeAt(k-1)<<16|32768;break;case 3:c=a.charCodeAt(k-3)<<24|a.charCodeAt(k-2)<<16|a.charCodeAt(k-1)<<8|128}for(l.push(c);14!==(l.length&15);)l.push(0);l.push(k>>>29);l.push(k<<3&4294967295);for(a=0;a<l.length;a+=16){for(c=0;16>c;c++)e[c]=l[a+c];for(c=16;79>=c;c++)e[c]=b(e[c-3]^e[c-8]^e[c-14]^e[c-16],1);r=f;k=g;var t=q,u=h,m=n;for(c=0;19>=c;c++){var p=b(r,5)+(k&t|~k&u)+m+e[c]+1518500249&4294967295;m=u;u=t;t=b(k,30);k=r;r=p}for(c=20;39>=c;c++)p=b(r,5)+(k^t^u)+m+e[c]+1859775393&4294967295,
m=u,u=t,t=b(k,30),k=r,r=p;for(c=40;59>=c;c++)p=b(r,5)+(k&t|k&u|t&u)+m+e[c]+2400959708&4294967295,m=u,u=t,t=b(k,30),k=r,r=p;for(c=60;79>=c;c++)p=b(r,5)+(k^t^u)+m+e[c]+3395469782&4294967295,m=u,u=t,t=b(k,30),k=r,r=p;f=f+r&4294967295;g=g+k&4294967295;q=q+t&4294967295;h=h+u&4294967295;n=n+m&4294967295}p=d(f)+d(g)+d(q)+d(h)+d(n);return p.toLowerCase()},X=function(a,b,d){return a.call.apply(a.bind,arguments)},Y=function(a,b,d){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,
2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,c);return a.apply(b,d)}}return function(){return a.apply(b,arguments)}},x=function(a,b,d){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?X:Y;return x.apply(null,arguments)},y=function(a,b,d,c){a.addEventListener?a.addEventListener(b,d,!!c):a.attachEvent?a.attachEvent("on"+b,d):a["on"+b]=d},B=function(a,b,d,c){a.removeEventListener?a.removeEventListener(b,d,!!c):
a.detachEvent?a.detachEvent("on"+b,d):a["on"+b]=null},Q=function(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a},Z=function(a,b){var d=new Image(1,1);if(b){var c=function(a){b(a);B(d,"load",c,!1);B(d,"error",c,!1)};y(d,"load",c,!1);y(d,"error",c,!1)}d.src=a};m=function(a){var b;h.addEventListener?y(h,"DOMContentLoaded",function c(){B(h,"DOMContentLoaded",c,!1);a()},!1):h.attachEvent&&(y(h,"onreadystatechange",function e(){"complete"===h.readyState&&(B(h,"onreadystatechange",
e,!1),a())},!1),h.documentElement.doScroll&&f===f.top&&function V(){if(!E){try{h.documentElement.doScroll("left")}catch(W){setTimeout(V,0);return}a()}}());/WebKit/.test(I.userAgent)&&(b=setInterval(function(){if(E||/loaded|complete/.test(h.readyState))clearInterval(b),a()},10));y(f,"load",a,!1)};var R=function(a){var b={},d;for(d in a)if(a.hasOwnProperty(d)){var c=a[d],e=typeof c;b[d]="function"===e||"object"===e&&c?R(a[d]):a[d]}return b},S=function(a){return null===a?!1:"function"===typeof a||"object"===
typeof a},C=function(){this.location_url=f.location_url||f.location.href;this.site_id=parseInt("0"+f.SITE_ID);this.pageview_id=this.my_vne=this.fosp_loc=this.fosp_aid=this.uid=null;this.meta={};this.article_id=0;this.action_name="play pageview buy addtocart checkout read like comment save fblike fbshare twitter ggplus".split(" ");this.action="pageview";this.host=this.referer=this.link_ref=null;this.platform="1";this.algoRead=this.totalRead=this.readStart=0;this.scrollEvent=!1;this.scrollTimer=0;this.container=
null;this.type="text";this.playEmbed=0;this.logEggType={ts_1:0,ts_2:0,ts_3:0,ts_4:0,ts_5:0,ts_6:0,ts_7:0,ts_8:0,ts_9:0,ts_10:0};this.vnTracking=function(){var a=f.dataLayer||{},b;for(b in a)if("vn_source"==b||"vn_campaign"==b||"vn_medium"==b)this.meta[b]=a[b]};this.init=function(){var a=D("fosp_aid"),b=D("orig_aid");if(!a||""==a){var d;if(d=/(^|&)[ ]*fosp_aid=([^&]*)/.exec(f.name))a=L(d[2]);else{d="";for(a=0;16>a;a++)d+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));a=
d+"."+Math.floor((new Date).getTime()/1E3)}}this.fosp_aid=a.substr(0,40);this.uid=b?b.substr(0,40):this.fosp_aid;this.fosp_loc=z;this.my_vne=p("myvne_user_id");this.pageview_id=P(Math.random()+this.fosp_aid+Date.now()).substr(0,32);d={};a=h.getElementsByTagName("meta");b=0;for(var c=a.length,e=a[b];b<c;e=a[++b]){var g=e.getAttribute("name");e=e.getAttribute("content");null!=g&&(d[g]=e)}this.meta=d;this.article_id=this.meta.its_id||0;this.ref_id=this.meta.its_ref||0;d="";try{d=f.top.document.referrer}catch(W){if(f.parent)try{d=
f.parent.document.referrer}catch(q){d=""}}""===d&&(d=h.referrer);this.link_ref=d;this.referer=Q(d);this.host=Q(f.location.href);/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i.test(K)&&(this.platform="2",F("iPad")||F("Android")&&!F("Mobile")||F("Silk"))&&(this.platform="3");this.meta.hasOwnProperty("its_type")&&(this.type=this.meta.its_type||"text");this.vnTracking()};this.eventBeforeUnLoad=
function(a){f.setTimeout(x(this.actualRead,this),0);return!0};this.actualRead=function(){var a=Date.now();if(0<this.readStart){this.algoRead+=a-this.readStart;var b=Math.min(100,Math.floor(100*this.algoRead/this.totalRead));b=Math.floor(b/10);this.logEggType.hasOwnProperty("ts_"+b)&&!this.logEggType["ts_"+b]&&(this.logEggType["ts_"+b]=1,this.sendLog({action:"read",ratio:10*b}));10==b&&(this.scrollEvent&&f.clearTimeout(this.scrollEvent),B(f,"scroll",T,!1))}this.readStart=a};this.eventVideo=function(a){if(a.detail&&
a.detail.type){var b=0;switch(a.detail.type){case "videoComplete":b=100;break;case "videoStart":b=0;break;case "videoPlay":b=0;break;case "videoProgress":b=(""+(a.detail&&a.detail.percent)).replace("%",""),b=1*parseInt(b)}a=Math.floor(.1*b);this.logEggType.hasOwnProperty("ts_"+a)&&!this.logEggType["ts_"+a]&&(this.logEggType["ts_"+a]=1,this.sendLog({action:"play",type:"video",ratio:b}))}};this.eventInterval=function(){if("video"==this.type||"play"==this.action)return!1;var a=!0;3>this.scrollTimer?
0<this.readStart&&(this.scrollEvent&&f.clearTimeout(this.scrollEvent),this.scrollEvent=f.setTimeout(x(this.eventInterval,this),5E3)):a=!1;this.actualRead();a||(this.readStart=0);this.scrollTimer+=1;console.log("readStart:",this.readStart,"scrollTimer:",this.scrollTimer)};this.eventScroll=function(){this.scrollTimer=0;var a=!1;if(this.container){var b=this.container.getBoundingClientRect();b&&b.top<f.innerHeight&&0<b.bottom?a=!0:this.readStart=0}a&&(this.scrollEvent&&f.clearTimeout(this.scrollEvent),
this.scrollEvent=f.setTimeout(x(this.eventInterval,this),500))};this.initReady=function(){var a=this.meta.hasOwnProperty("its_wordcount")&&parseInt(this.meta.its_wordcount,10)||0;if("video"==this.type||"play"==this.action)this.totalRead=0<a?1E3*a:0,y(f,"PlayerCustomEvent",x(this.eventVideo,this),!1);else{var b=h.getElementsByClassName("block_ads_connect");0==b.length&&(b=h.getElementsByClassName("fck_detail"),0==b.length&&(b=h.getElementsByTagName("body")));0<b.length&&b[0].innerText&&(this.container=
b[0],b=b[0].innerText.match(/[\w\.]+?([\.']\w+?)?([\s\.',\):\]]+|$)/gi).length,b=Math.max(b,a),this.totalRead=1E3*Math.round(b/(200<b?5:6)))}1>this.totalRead&&(this.totalRead=1);this.readStart=Date.now();this.eventInterval()}};C.prototype.sendLog=function(a){var b;a.hasOwnProperty("action")&&(b=-1<this.action_name.indexOf(a.action)?a.action:null);if(b){for(var d=this.meta,c="its_name its_url its_id its_title its_section its_subsection its_tag its_topic its_object its_embed its_author its_type its_wordcount its_publication".split(" "),
e=0,f=c.length;e<f;e++){var g=c[e];d.hasOwnProperty(g)&&(a[g]=d[g])}a.platform=this.platform;a.fosp_loc=this.fosp_loc;a.referer=this.referer;a.link_ref=this.link_ref;a.location_url=this.location_url;a.site_id=this.site_id;d=[];delete a.its_id;delete a.its_ref;for(var h in a)S(a[h])||d.push(h+"="+H(a[h]));d.push("its_id="+this.article_id);d.push("its_ref="+this.ref_id);d.push("fosp_aid="+this.fosp_aid);d.push("uid="+this.uid);d.push("my_vne="+this.my_vne);d.push("play_embed="+this.playEmbed);d.push("pageview_id="+
this.pageview_id);Z("https://la3.vnecdn.net/"+b+"/?"+d.join("&"),function(){});return!0}};if(A.push===Array.prototype.push){var g=new C;g.init();g.sendLog({action:"pageview"});if(l){var T=x(g.eventScroll,g);m(function(){E||(g.initReady(),y(f,"scroll",T,!1));E=!0})}var w={egg:g},G=function(a){var b="play"==a.action?"play":"egg",d=a.meta&&a.meta.its_id||a.id||g.article_id;b=d==g.article_id?b:b+d;if(!(w[b]&&w[b]instanceof C)){var c=new C;c.action=a.action;c.playEmbed=a.play_embed||0;c.fosp_aid=g.fosp_aid;
c.uid=g.uid;c.fosp_loc=g.fosp_loc;c.my_vne=g.my_vne;c.pageview_id="pageview"==a.action?P(Math.random()+g.fosp_aid+Date.now()).substr(0,32):g.pageview_id;c.meta=g.meta;c.article_id=d;c.ref_id=g.article_id;c.referer=g.host;c.link_ref=g.link_ref;c.location_url="pageview"==a.action?f.location.href:g.location_url;c.platform=g.platform;if(a.meta&&S(a.meta))for(var e in a.meta)c.meta[e]=a.meta[e];c.vnTracking();c.type=a.meta&&a.meta.its_type?a.meta.its_type:g.type;for(var h in w)w.hasOwnProperty(h)&&w[h]instanceof
C&&w[h].type==c.type&&(w[h].logEggType={});c.initReady();w[b]=c}return w[b]};m=function(a){return"[object Array]"!==Object.prototype.toString.call(a)?!1:(a=A.shift())?G(a).sendLog(a):!1};l=0;for(n=A.length;l<n;++l)m(A[l]);A.push=function(a){G(a).sendLog(a);"pageview"==a.action&&a.meta&&"video"==a.meta.its_type&&(a=R(a),a.action="play",a.ratio=0,G(a).sendLog(a))};1003834==f.SITE_ID&&"pageview"==g.action&&"video"==g.type&&(l={action:"play",ratio:0},G(l).sendLog(l))}})(window,document,location,history)}catch(f){console.log("egg:",
f)};