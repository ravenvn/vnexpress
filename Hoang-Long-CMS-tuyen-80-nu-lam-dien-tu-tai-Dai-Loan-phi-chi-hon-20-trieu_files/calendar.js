var CalendarParser=function(){return{calendar_parser_base_url:"//vnexpress.net",calendar_parser_url:js_url_vne+"/utils/calendar",calendar_parser_id:"calendar",calendar_parser_parent:0,calendar_parser_child:0,calendar_parser_child_recursive:0,isloadstatic:0,datepickerloaded:0,blockbox:function(e){return"undefined"!=e&&(this.addstatic(),this._blockboxhtml(e),void(1==this.datepickerloaded?this._blockaction(e):$.getScript(CalendarParser.calendar_parser_url+"/datepicker/js/datepicker.js",function(a,t,r){CalendarParser._blockaction(e),CalendarParser.datepickerloaded=1})))},_blockaction:function(param){var prefix=param.prefix?param.prefix:"block_",divid=param.id?param.id:"calendarblock",fomatdate=param.fomatdate?param.fomatdate:"m/d/Y",now3=new Date,now4=new Date,calendarid=prefix+"widgetCalendar",calendarfield=prefix+"widgetField",currentdate=param.currentdate?param.currentdate:[new Date(now3),new Date(now4)];$("#"+calendarid).DatePicker({flat:!0,format:fomatdate,date:currentdate,calendars:1,starts:1,onChange:function(formated){eval(param.callback)(formated)}});var state=!1;$("#"+calendarfield).bind("click",function(){return $("#"+calendarid).stop().animate({height:state?0:$("#"+calendarid+" div.datepicker").get(0).offsetHeight},500),state=!state,!1}),$("#"+calendarid+" div.datepicker").css("position","absolute")},_blockboxhtml:function(e){var a=e.prefix?e.prefix:"block_",t=e.id?e.id:"calendarblock",r=document.createElement("div");r.setAttribute("id",a+"widgetCalendar"),r.setAttribute("class","calendarblockvne");var d=document.createElement("div");d.setAttribute("id",a+"widgetField");var n=document.createElement("div");n.setAttribute("id",a+"widget"),n.appendChild(d),n.appendChild(r),document.getElementById(t).appendChild(n)},addstatic:function(){return 1!=this.isloadstatic&&(CalendarParser.addCss(CalendarParser.calendar_parser_url+"/datepicker/css/datepicker.css"),CalendarParser.addCss(CalendarParser.calendar_parser_url+"/datepicker/css/layout.css"),void(this.isloadstatic=1))},parse:function(){return $("#"+CalendarParser.calendar_parser_id).length>0&&(this.addstatic(),this.addHtml(),void(1==this.datepickerloaded?this.action():$.getScript(CalendarParser.calendar_parser_url+"/datepicker/js/datepicker.js",function(e,a,t){CalendarParser.action(),CalendarParser.datepickerloaded=1})))},addCss:function(e){var a=document.createElement("link");a.setAttribute("href",e),a.setAttribute("type","text/css"),a.setAttribute("rel","stylesheet"),document.getElementsByTagName("head")[0].appendChild(a)},addHtml:function(){var e=new Date;e=[e.getDate(),e.getMonth()+1,e.getFullYear()].join("/");var a=document.createElement("span");a.setAttribute("id","vne_ttn_current_date"),a.innerHTML="Xem theo ngày";var t=document.createElement("div");t.setAttribute("id","widgetField");var r=document.createElement("div");r.setAttribute("id","widgetCalendar");var d=document.createElement("div");d.setAttribute("id","widget"),t.appendChild(a),d.appendChild(t),d.appendChild(r),document.getElementById(CalendarParser.calendar_parser_id).appendChild(d)},action:function(){var e=$("#current_cate_from").val();e=e?e:new Date;var a=$("#current_cate_to").val();a=a?a:new Date,$("#widgetCalendar").DatePicker({flat:!0,format:"m/d/Y",date:[e,a],calendars:1,mode:"range",starts:1,onChange:function(e){var a=e[0].split("/"),r=e[1].split("/");a=a[1]+"/"+a[0]+"/"+a[2],r=r[1]+"/"+r[0]+"/"+r[2],$("#widgetField span").get(0).innerHTML=a+" - "+r,$("#widgetCalendar").find(".btn_calenda_dong").bind("click",function(){$("#widgetCalendar").stop().animate({height:0},500),t=!1})}});var t=!1;$("#widgetField>span, .btn_calenda_dong").on("click",function(){return $("#widgetCalendar").stop().animate({height:t?0:$("#widgetCalendar div.datepicker").get(0).offsetHeight},500),t=!t,!1}),$("#widgetCalendar div.datepicker").css("position","absolute")},finish:function(){var e=$("#widgetField span").html();if(!e||""==e)return alert("Vui lòng chọn ngày"),!1;var a=e.split("-"),t=a[0].split("/"),r=a[1].split("/");t=t[1]+"/"+t[0]+"/"+t[2],r=r[1]+"/"+r[0]+"/"+r[2];var d=Date.parse(t)/1e3,n=Date.parse(r)/1e3;d==n?n=d+83544:n+=84960;var i=$("#parent_cate").val(),l=$("#child_cate").val(),c=$("#child_recursive_cate").val();if("undefined"==typeof i||""==i)var i=CalendarParser.calendar_parser_parent,l=CalendarParser.calendar_parser_child,c=CalendarParser.calendar_parser_child_recursive;var s=i+"|"+l+"|"+c,s=s.replace(/[^0-9|\.]+/g,""),o="";c?o=CalendarParser.calendar_parser_base_url+"/category/day/?cateid="+c+"&fromdate="+d+"&todate="+n+"&allcate="+s:l?o=CalendarParser.calendar_parser_base_url+"/category/day/?cateid="+l+"&fromdate="+d+"&todate="+n+"&allcate="+s:i&&(o=CalendarParser.calendar_parser_base_url+"/category/day/?cateid="+i+"&fromdate="+d+"&todate="+n+"&allcate="+s),o&&(window.location.href=o)}}}();