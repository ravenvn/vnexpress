var defaultDomain="vnexpress.net";if(location.hostname.indexOf("ngoisao.net")>-1)defaultDomain="ngoisao.net";else if(location.hostname.indexOf("ione.net")>-1)defaultDomain="ione.net";var cookieName="login_system";var cookieValue=1;if(document.cookie.indexOf(cookieName+"="+cookieValue)<0){var myDate=new Date;myDate.setMonth(myDate.getMonth()+12);document.cookie=cookieName+"="+cookieValue+";expires="+myDate+";domain=."+defaultDomain+";path=/"}if(!window.console)console={log:function(){}};
if(typeof device_env=="undefined")var device_env=4;var isMyVne=window.location.href.includes("my."+defaultDomain),isIone=window.location.href.includes("ione.net");
var myvne_users={domain:"."+defaultDomain,prefix_cookie:"myvne_",static_url:"https://s.vnecdn.net/myvne",myvne_url:location.hostname.indexOf("demo")>-1?"https://demo-my."+defaultDomain:"https://my."+defaultDomain,vne_url:"https://"+defaultDomain,profile:{},notifycount:0,notifylimit:10,notifyoffset:0,windowWidth:0,taskbarload:{"not_login":0,"profile":0},listenloaded:0,timeoutprofile:"",timeoutClose:"",config:{},options:{taskbar:true,type:"popup"},runloaded:0,callback:"",callbackAction:{},divposition:"body",
fullname:null,action:null,return_code:null,message:null,oauth_type:null,time_now:(new Date).getTime(),check_responsive:0,setCallback:function(action,callbackfunction){var arrCallback=this.callbackAction;if(typeof callbackfunction==="function");if(!arrCallback[action])arrCallback[action]=[callbackfunction];else if(arrCallback[action].indexOf(callbackfunction)==-1)arrCallback[action].push(callbackfunction);this.callbackAction=arrCallback;return"setcallback ok"},unsetCallback:function(action,callbackfunction){var arrCallback=
this.callbackAction;if(arrCallback[action]){if(action=="authen")return delete arrCallback[action];var index=arrCallback[action].indexOf(callbackfunction);if(index!=-1)arrCallback[action].splice(index,1)}return false},processCallback:function(action,data){var self=this;if(typeof action=="object")$.each(action,function(index,value){self.processCallback(value,data)});var arrCallback=this.callbackAction;if(arrCallback[action])$.each(arrCallback[action],function(index,value){if(action=="authen")self.callbackAction[action].splice(index,
1);self.runcallback(value,data)});return false},addScripts:function(filepath,runtype,callback,stype){var el=document.createElement("script");if(typeof stype==="undefined")el.type="text/javascript";else el.type=stype;el.src=filepath;el.async=runtype;el.onload=function(){el.setAttribute("loaded","loaded");if(typeof callback=="function")callback()};document.getElementsByTagName("head")[0].append(el)},getUrlParameter:function(sParam){var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split("&"),
sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split("=");if(sParameterName[0]===sParam)return sParameterName[1]===undefined?true:decodeURIComponent(sParameterName[1])}},run:function(options){this.action=this.getUrlParameter("action");this.return_code=this.getUrlParameter("return_code");this.message=this.getUrlParameter("message");if(typeof this.action!=="undefined"&&this.action==="logged"&&typeof this.return_code!=="undefined"&&this.return_code==="200"){this.oauth_type=
this.getUrlParameter("oauth_type");this.getprofile();if(location.href.includes("?action=logged&return_code=200")){var url_replace=location.href.replace("?action=logged&return_code=200","");window.history.replaceState(false,false,url_replace)}else{var url_replace=location.href.replace("&action=logged&return_code=200","");window.history.replaceState(false,false,url_replace)}}else if(typeof this.action!=="undefined"&&this.action==="logged_internal"&&typeof this.return_code!=="undefined"&&this.return_code===
"200"){this.oauth_type=this.getUrlParameter("oauth_type");this.getprofile();if(location.href.includes("?action=logged_internal&return_code=200")){var url_replace=location.href.replace("?action=logged_internal&return_code=200","");window.history.replaceState(false,false,url_replace)}else{var url_replace=location.href.replace("&action=logged_internal&return_code=200","");window.history.replaceState(false,false,url_replace)}}else{var option_default=this.options;this.options=$.extend(true,option_default,
options||{});var link_env=window.location.href.includes("demo."+defaultDomain)?"pc":"production";this._responsive();this._check_javascript_exist();if(this.options.taskbar==true){var user_id=parseInt(this.getCookie("user_id")),onetap=parseInt(this.getCookie("onetap"));if(!user_id){this._html_taskbar_not_login();this.processCallback("not_login",{type:1});if(isNaN(onetap)||onetap!=1)this.onetap()}else this.getprofile()}this._listener_basic();if(typeof $.magnificPopup==="undefined")this.addScripts(js_url_vne+
"/v3/"+link_env+"/libs/jquery.magnific-popup.min.js")}},onetap:function(){var self=this;$("#myvne_taskbar").append('<div id="g_id_onload" data-client_id="63695605483-uh3lvelqpb59s1tn5qh59ovbcuhfa54v.apps.googleusercontent.com" data-context="use" data-state_cookie_domain="'+defaultDomain+'" data-prompt_parent_id="g_id_onload" data-url_one_tap='+window.location.href+' data-login_uri="'+self.myvne_url+'/openid/onetap" style="position: fixed; top: 50px; right: 10px; z-index: 1001;"></div>');self.addScripts("https://accounts.google.com/gsi/client",
false)},_responsive:function(){this.windowWidth=$(window).width()},getProfileData:function(callback){if(typeof callback!="undefined")if(this.profile)this.runcallback(callback,this.profile);return this.profile},getprofile:function(){var self=this;if(!self.profile.user_fullname||!self.profile.user_id)$.ajax({type:"get",dataType:"jsonp",cache:true,jsonpCallback:"MyvneCallback",url:self.myvne_url+"/authen/users/profile",success:function(data){if(data.error==0){var profile=data.profile;var global_env=
typeof ZONE_ADS!="undefined"?parseInt(ZONE_ADS):0;if(typeof profile.user_avatar!="undefined"&&global_env==1){profile.user_avatar=profile.user_avatar.replace("a.vnecdn.net","vcdn-a.vnecdn.net");profile.user_avatar_original=profile.user_avatar_original.replace("a.vnecdn.net","vcdn-a.vnecdn.net")}self.notifycount=data.count_notify;self.profile=profile;self.profilecallback();if(self.oauth_type!=null){var _logAdp=window["_logAdp"]||[];_logAdp.push({"action":self.oauth_type,"regis_on":window.location.origin,
"my_vne":profile.user_id,"vne_avatar":profile.user_avatar,"vne_email":profile.user_email,"vne_phone":profile.mobile||"","vne_name":profile.user_fullname||"","vne_gender":profile.sex||0,"vne_age":profile.age,"vne_birthday":profile.date_of_birth,"vne_city":profile.city,"vne_dist":profile.district,"vne_address":profile.address})}}else if(data.rev=="not_login")self._reset_user();self.processCallback("profile",self.profile)},error:function(data,code){console.log(data,code)}});else return self.profile},
profilecallback:function(){var self=this;self._set_user();$("#myvne_action_log").hide();self.timeoutprofile=setTimeout(function(){self.profile={};self.getprofile()},2E5)},logout:function(){var self=this;$.ajax({type:"post",dataType:"jsonp",url:self.myvne_url+"/authen/users/logout",data:{userid:self.user_id},success:function(data){if(data.error==0){self.setCookie("onetap",1,1);self._reset_user();self.processCallback("logout",data);if($(".message_box").length>0){$(".message_box").remove();myvne_users.setCookie("tmp_notify",
1,30)}if(typeof myvne_plugins!=="undefined")myvne_plugins.initButton();if(typeof dataLayer!=="undefined")dataLayer.push({event:"userEvent",user_action:"User Logout",user_signup_method:"Email"});var _logAdp=window["_logAdp"]||[];_logAdp.push({"action":"logout","regis_on":location.origin});console.log(_logAdp);var domainLogout=[];if(self.myvne_url.indexOf("vnexpress.net")>-1)domainLogout=["my.ione.net","my.ngoisao.net"];else if(self.myvne_url.indexOf("ngoisao.net")>-1)domainLogout=["my.vnexpress.net",
"my.ione.net"];else if(self.myvne_url.indexOf("ione.net")>-1)domainLogout=["my.vnexpress.net","my.ngoisao.net"];if(location.hostname.indexOf("demo.")>-1){domainLogout[0]=domainLogout[0].replace("my.","demo-my.");domainLogout[1]=domainLogout[1].replace("my.","demo-my.")}location.href="https://"+domainLogout[0]+"/authen/users/logout?dist=https://"+domainLogout[1]+"&count=1&return="+location.href}else alert(data.message);if(isMyVne)location.reload()},error:function(data,code){alert(self._get_message("system_error"))}});
return false},_check_javascript_exist:function(){},set_time_topbar:function(){var d=new Date;var weekday=new Array(7);weekday[0]="Ch\u1ee7 nh\u1eadt";weekday[1]="Th\u1ee9 hai";weekday[2]="Th\u1ee9 ba";weekday[3]="Th\u1ee9 t\u01b0";weekday[4]="Th\u1ee9 n\u0103m";weekday[5]="Th\u1ee9 s\u00e1u";weekday[6]="Th\u1ee9 b\u1ea3y";var n=weekday[d.getDay()];var now=new Date;var date=now.getDate();var month=now.getMonth()+1;var hour=now.getHours();var minute=now.getMinutes();var outStr=n+", "+date+"/"+month+
"/"+now.getFullYear();return outStr},_html_taskbar_not_login:function(){var self=this,timer=this.set_time_topbar();if(!$("#myvne_taskbar").length)return false;else if(isIone){$("#myvne_taskbar").html('<div id="myvne" class="myvne_taskbar myvne_login_button"><a href="javascript:void(0);" class="log_txt" title="\u0110\u0103ng nh\u1eadp"><svg class="icon-svg"><use xlink:href="#user"></use></svg></a></div>');if(self.taskbarload.not_login==0){$("#myvne_taskbar").on("click",".myvne_login_button",function(){self._html_popup_login()});
self.taskbarload.not_login=1}}else{$("#myvne_taskbar").html('<div id="myvne" class="myvne_taskbar myvne_login_button"><a href="javascript:void(0);" class="log_txt" title="\u0110\u0103ng nh\u1eadp"><svg class="ic ic-user"><use xlink:href="#User"></use></svg> \u0110\u0103ng nh\u1eadp</a></div>');if(isMyVne){$(".time-now").html(timer);$("#logoVneHeader").html('<img src="'+img_url_vne+'/v2_2019/pc/graphics/logo.svg" alt="VNExpress">')}if(self.taskbarload.not_login==0){$("#myvne_taskbar").on("click",".myvne_login_button",
function(){self._html_popup_login()});self.taskbarload.not_login=1}}},_notify_replace_url:function(){if(location.host==="beta.vnexpress.net")$("#myvne_notify_lists .myvne_nofify_item:not(.link_replaced)").each(function(){var _self=$(this);_self.find("a").each(function(){$(this).removeAttr("onclick");var url=$(this).attr("href");var segment=url.split("/");if(url.indexOf("//vnexpress.net/")>-1&&url.indexOf(".html")>-1){var new_url="https://beta.vnexpress.net/"+segment.pop();_self.addClass("link_replaced");
$(this).attr("href",new_url)}})})},_get_notify_count:0,_get_notify:function(){var self=this;$.ajax({type:"get",dataType:"jsonp",cache:true,jsonpCallback:"MyvneCallback",data:{offset:self.notifyoffset,limit:self.notifylimit},url:self.myvne_url+"/authen/users/notify",success:function(data){if(data.error==0){var scroll=true;self.notifyoffset=self.notifyoffset+self.notifylimit;if($("#myvne_notify_lists .ss-content").length&&self._get_notify_count>0){$("#myvne_notify_lists .ss-content").append(data.html);
self._notify_replace_url()}else if(data.html.indexOf("B\u1ea1n ch\u01b0a c\u00f3 ho\u1ea1t \u0111\u1ed9ng b\u00ecnh lu\u1eadn n\u00e0o tr\u00ean VnExpress")>-1){scroll=false;$("#myvne_notify_lists").css("height","auto");$("#myvne_notify_lists").append('<li style="padding: 20px;">B\u1ea1n ch\u01b0a c\u00f3 ho\u1ea1t \u0111\u1ed9ng b\u00ecnh lu\u1eadn n\u00e0o tr\u00ean VnExpress</li>')}else{$("#myvne_notify_lists").append(data.html);self._notify_replace_url()}$("#myvne_notify_count").remove();$("#myvne_notify_lists").find(".myvne_loading").remove();
if(data.viewmore==1){$("#myvne_notify_viewmore_area").show();$("#myvne_loading_viewmore").hide();$("#myvne_notify_viewmore").show()}else $("#myvne_notify_viewmore_area").remove();self._get_notify_count++;if($("#myvne_notify_lists").find(".myvne_nofify_item").find("a").length>0)$("#myvne_notify_lists").find(".myvne_nofify_item").find("a").on("click",function(event){event.preventDefault();var notify_id=$(this).attr("data-id");var url=$(this).attr("href");if(notify_id)$.ajax({type:"get",dataType:"jsonp",
data:{notify_id:notify_id},url:self.myvne_url+"/authen/users/changenotifystatus",success:function(data){self._redirect(url)},error:function(){console.log(self._get_message("system_error"))}})})}else{self._html_popup_success(data.message);self._reset_user()}if(scroll===true){var scrollMenu=document.querySelector("#myvne_notify_lists");if(scrollMenu!=null&&typeof SimpleScrollbar!="undefined")SimpleScrollbar.initEl(scrollMenu)}},error:function(data,code){console.log(self._get_message("system_error"))}})},
_html_taskbar_profile:function(){var self=this,timer=this.set_time_topbar();if(!$("#myvne_taskbar").length||typeof self.profile!="object")return false;var checkAvatasrc=self.profile.user_avatar.indexOf("/src/");var urlAvata=checkAvatasrc>10?this.replaceAvatar(self.profile.user_avatar,"/c60x60/"):self.profile.user_avatar;var fullname=self.profile.user_email.substring(0,self.profile.user_email.lastIndexOf("@"));if(self.fullname)fullname=self.fullname;else if(self.profile.user_fullname&&self.profile.user_fullname.length>
0)fullname=self.profile.user_fullname;if(urlAvata.indexOf("/img_60x60.gif")>0)var imgAvata=fullname.charAt(0);else var imgAvata='<img src="'+urlAvata+'" width="25" height="25" alt="">';self.fullname=null;var html='        <div id="myvne" class="myvne_taskbar">            <div class="myvne_container" id="myvne_user_logged">              <ul class="myvne_form_log logged">                <li class="myvne_user" id="myvne_profile_tool">                  <a href="javascript:void(0);" id="myvne_avatar_taskbar" class="myvne_avatar">                    <span class="avatar_inner">'+
imgAvata+'</span>                    <span class="name_user_av">'+fullname+'</span>                  </a>                  <ul class="myvne_user_status" style="display:none;">                    <li class="li_bd li_account">                      <span class="avatar_sub">'+imgAvata+'</span>                        <span class="name_sub">'+fullname+'</span>                    </li>                    <li><a href="'+self.myvne_url+"/users/feed/"+self.profile.user_id+'" title="Ho\u1ea1t \u0111\u1ed9ng b\u00ecnh lu\u1eadn">Ho\u1ea1t \u0111\u1ed9ng b\u00ecnh lu\u1eadn</a></li>                    <li><a href="'+
self.myvne_url+'/users/tin-da-luu" title="Tin \u0111\u00e3 l\u01b0u">Tin \u0111\u00e3 l\u01b0u</a></li>                    <li class="li_bd"><a href="'+self.myvne_url+'/users/tin-da-doc" title="Tin \u0111\u00e3 xem">Tin \u0111\u00e3 xem</a></li>                    <li class="li_bd"><a id="myvne_update_profile_link" href="'+self.myvne_url+'/users/chi-tiet-tai-khoan" title="T\u00e0i kho\u1ea3n c\u1ee7a t\u00f4i">T\u00e0i kho\u1ea3n c\u1ee7a t\u00f4i</a></li>                    <li><a href="'+self.myvne_url+
'/qua-tang" title="Qu\u00e0 t\u1eb7ng">Qu\u00e0 t\u1eb7ng</a></li>                    <li class="li_bd"><a href="https://kidlab.vnexpress.net/" title="Kid-lab">Kid-lab</a></li>                    <li><a href="javascript:void(0);" id="myvne_logout_link">Tho\u00e1t</a></li>                  </ul>                </li>                <li class="myvne_notification" id="myvne_notify_show">                <a class="myvne_icon_bell_click"><svg class="ic ic-bell"><use xlink:href="#Bell"></use></svg></a><span id="myvne_notify_area">';
if(self.notifycount>0&&self.notifycount<9)html+='<span class="badged" id="myvne_notify_count">'+self.notifycount+"</span>";else if(self.notifycount>9)html+='<span class="badged" id="myvne_notify_count">9+</span>';html+='</span><div id="myvne_notify_box" class="myvne_content_notification" style="display:none;">                    <ul id="myvne_notify_lists" class="scrollbar-macosx">                        <li class="myvne_loading">Loading</li>                    </ul>                    <ul id="myvne_notify_viewmore_area" style="display:none">                        <span id="myvne_loading_viewmore" style="display: none;">Loading</span>                        <a href="javascript:void(0);" id="myvne_notify_viewmore" class="myvne_notification-viewmore" style="display:none;">Xem th\u00eam</a>                    </ul>                </div>                </li>              </ul>              <div class="clear"></div>            </div>        </div>        ';
$("#myvne_taskbar").html(html);if($("#fEmail").length){$("#fEmail").val(self.profile.user_email);$("#fName").val(self.profile.user_fullname)}if(isMyVne){$(".time-now").html(timer);$("#logoVneHeader").html('<img src="'+img_url_vne+'/v2_2019/pc/graphics/logo.svg" alt="VNExpress">')}if(self.taskbarload.profile==0){$("#myvne_taskbar").on("click","#myvne_logout_link",function(){self.logout()});$("#myvne_taskbar").on("click","#myvne_avatar_taskbar",function(){$("#myvne_notify_box").hide();$(".myvne_user_status").toggle()});
if(1)$(document).click(function(e){if($(e.target).parents(".myvne_user").length==0&&$(e.target).parents(".myvne_user_status").length==0)$(".myvne_user_status").hide()});$("#myvne_taskbar").on("click",".myvne_icon_bell_click",function(){$("#myvne_profile_tool").find(".myvne_user_status").hide();if($("#myvne_notify_box").css("display")!=="none"){$("#myvne_notify_box").hide();$(this).parent().removeClass("active")}else{$("#myvne_notify_box").show();$(this).parent().addClass("active");if($("#myvne_notify_lists").find(".myvne_loading").length||
$("#myvne_notify_count").length)self._get_notify()}});$("#myvne_taskbar").on("click","#myvne_notify_viewmore",function(){$("#myvne_notify_viewmore").hide();$("#myvne_loading_viewmore").show();self.notifylimit=20;self._get_notify()});self.taskbarload.profile=1}},_listener_basic:function(){var self=this;if(self.listenloaded==1)return false;else self.listenloaded=1;var Listener=function(e){if(e.origin=="https://my.vnexpress.net"||e.origin=="https://my.ione.net"||e.origin=="https://my.ngoisao.net"||e.origin==
"https://demo-my.ione.net"||e.origin=="https://demo-my.ngoisao.net"||e.origin=="https://demo-my.vnexpress.net"){var data=e.data;switch(data){case "success":break;case "close":$.magnificPopup.close();if($("#iframe_register").length>0)$("#iframe_register").remove();break;default:try{data=JSON.parse(data);if(typeof data.callback!="undefined"&&data.callback=="login"&&typeof data.profile!="undefined"&&typeof data.profile!="object")break}catch(e$0){console.log(e$0)}if(data.success==1&&typeof data.callback!=
"undefined")switch(data.callback){case "subscribe":case "changepassword":case "forgotpass":case "resendactiveemail":case "resetpassword":self._html_popup_success(data.message,data.title);break;case "register":self.login(data);if(typeof data.url_redirect!=="undefined")self._html_popup_success(data.message,data.title,function(){location.href=data.url_redirect});else self._html_popup_success(data.message,data.title);self.deleteCookie("tmp_notify");self.deleteCookie("expired_notify");self.deleteCookie("count_notify");
setTimeout(function(){self._html_notify_confirm_email()},3E4);break;default:return self[data.callback](data)}else if(data.refer)switch(data.refer){case "profile":self.profile=data.profile;self._set_user();break;case "login":self._reset_user();break}else if(data.error){var msg='<div class="width_common block_log block_log_onlytext">                                            <div class="width_common tit_box">                                                <p>'+data.message+"</p>                                            </div>                                        </div>";
self._html_popup_success(msg,data.title)}break}}};if(window.addEventListener)window.addEventListener("message",Listener,false);else if(window.attachEvent)window.attachEvent("onmessage",Listener)},resetpassword:function(data){var self=this;self._html_popup_success(data.message,self.vne_url)},_html_popup_reset_password:function(user_id,token_key){if(!token_key||!user_id)return false;var self=this;$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne">'+
'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_resetpass" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/authen/users/resetpassword?userid="+user_id+"&tokenkey="+token_key,type:"iframe"},mainClass:"mfp-with-zoom mfp-myvne"});return false},login:function(data){var self=this;self.profile=data.profile;self.notifycount=data.count_notify;self.profilecallback();$.magnificPopup.close();setTimeout(function(){self._html_notify_confirm_email()},3E3);
if($("#myvne_create_account").length>0)$("#myvne_create_account").remove();if(typeof myvne_plugins!=="undefined"){myvne_plugins.checking=0;myvne_plugins.check()}self.processCallback(["login","authen"],self.profile);user_signup_method="Email";if(self.profile.user_login_type===5)user_signup_method="Facebook";if(self.profile.user_login_type===6)user_signup_method="Gmail";if(typeof dataLayer!=="undefined")dataLayer.push({event:"userEvent",user_action:"User Login",user_signup_method:user_signup_method,
user_id:data.profile.user_id});if(data.success===1&&data.callback=="register"&&data.profile.user_id){var _logAdp=window["_logAdp"]||[];_logAdp.push({"action":"register","regis_on":window.location.origin,"my_vne":data.profile.user_id,"vne_avatar":data.profile.user_avatar,"vne_email":data.profile.user_email,"vne_phone":data.profile.mibile||"","vne_name":data.profile.user_fullname||"","vne_gender":data.profile.sex||0,"vne_age":data.profile.age,"vne_birthday":data.profile.date_of_birth,"vne_city":data.profile.city,
"vne_dist":data.profile.district,"vne_address":data.profile.address})}else if(typeof data.adp.my_vne!=="undefined"){var _logAdp=window["_logAdp"]||[];_logAdp.push({"action":data.adp.action,"regis_on":window.location.origin,"my_vne":data.adp.my_vne,"vne_avatar":data.adp.vne_avatar,"vne_email":data.adp.vne_email,"vne_phone":data.adp.vne_phone||"","vne_name":data.adp.vne_name||"","vne_gender":data.adp.vne_gender||0,"vne_age":data.adp.vne_age,"vne_birthday":data.adp.vne_birthday,"vne_city":data.adp.vne_city,
"vne_dist":data.adp.vne_dist,"vne_address":data.adp.vne_address})}if(isMyVne)location.reload()},guestpost:function(data){var self=this;self.profile=data.profile;$.magnificPopup.close();self.processCallback("authen",self.profile)},_html_popup_login:function(){var self=this;if(this.getCookie("login_system")!=1){var myDate=new Date;myDate.setMonth(myDate.getMonth()+12);document.cookie="login_system=1;expires="+myDate+";domain=."+defaultDomain+";path=/"}if(device_env===1&&typeof landingpage!=="undefined"&&
landingpage===1||self.check_responsive===1)$.magnificPopup.open({type:"iframe",items:{src:self.myvne_url+"/authen/users/login?refer=authen&view=redesign&host="+location.origin+"&return="+encodeURIComponent(location.href.split("#")[0])},mainClass:"mfp-with-zoom mfp-myvne"});else $.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-log">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+
"</div></div>"},items:{src:self.myvne_url+"/authen/users/login?refer=authen&host="+location.origin+"&return="+encodeURIComponent(location.href.split("#")[0])},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"});$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"500px"})}}})},_html_popup_guest:function(){var self=this;var input_extend=self.config.input_extend?
"?input_extend="+self.config.input_extend:"";$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/authen/users/guestpost"+input_extend},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px",
"max-width":"768px"});$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"600px"})}}})},_html_popup_invite:function(type,email,fullname){var self=this;self.fullname=fullname;$.ajax({type:"get",dataType:"json",data:{email:email},url:self.myvne_url+"/authen/users/checkemail",success:function(data){if(data.error==0)url="/authen/users/inviteregister?type="+type+"&email="+email+"&fullname="+fullname;else if(data.error==1)url="/authen/users/login?type="+type+"&email="+email+
"&fullname="+fullname+"&return="+encodeURIComponent(location.href.split("#")[0]);$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+url},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px",
"max-width":"768px"});$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"500px"})}}})},error:function(data,code){console.log(self._get_message("system_error"))}})},_html_popup_register:function(){$.magnificPopup.instance.close();var self=this;if(this.getCookie("login_system")!=1){var myDate=new Date;myDate.setMonth(myDate.getMonth()+12);document.cookie="login_system=1;expires="+myDate+";domain=."+defaultDomain+";path=/"}$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-log">'+
'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/authen/users/register?host="+location.origin},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"});$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"500px"})},beforeClose:function(){try{var iframeWin=
document.getElementById("iframe_register").contentWindow;iframeWin.postMessage("removesession","*")}catch(e){}}}})},_html_popup_success:function(msg,title,cb){var isHTML=function(str){var fragment=document.createRange().createContextualFragment(str);fragment.querySelectorAll("*").forEach(function(el){el.parentNode.removeChild(el)});return!(fragment.textContent||"").trim()};if(isHTML(msg)==false)msg='<div class="width_common block_log block_log_onlytext">                    <div class="width_common tit_box">                        <p>'+
msg+"</p>                    </div>                </div>";var htmlsuccess='<div id="notice-popup" class="white-popup-myvne popup-notice"><div class="inner-popup">';if(title==""||typeof title=="undefined")title="C\u00f3 l\u1ed7i x\u1ea3y ra";htmlsuccess+='<div class="title_popup_myvne title_notice width_common">'+title+'</div><div class="content_poup_myvne width_common content_log content_notice">';htmlsuccess+=msg+"</div></div></div>";return $.magnificPopup.open({items:{src:htmlsuccess,type:"inline",
mainClass:"mfp-with-zoom mfp-myvne"},callbacks:{open:function(){$(".mfp-content").css({"min-height":"500px","max-width":"768px"})},close:function(){if(typeof cb==="function")cb()}}})},_html_popup_forgot:function(refer){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+
"/authen/users/forgotpass?cache=1"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})},afterClose:function(){$("#myvne_close_popup").unbind();if(refer)self._redirect(refer)}}})},_html_popup_resend_mail:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice">'+'<div class="mfp-close"></div>'+
'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/authen/users/resendactiveemail?cache=1"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})}}})},updateprofile:function(data){var self=this;this.profile=data.profile;this._set_user();this._html_popup_success(data.message);self.processCallback("update_profile",
self.profile)},_html_popup_profile:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/authen/users/updateprofile"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px",
"max-width":"768px"})}}})},_html_popup_change_password:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/authen/users/changepassword"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px",
"max-width":"768px"})}}})},_html_popup_subscribe:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/subscribe/register"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px",
"max-width":"768px"})}}})},setCookie:function(name,value,days){var hostName=location.hostname,url=hostName.substring(hostName.lastIndexOf(".",hostName.lastIndexOf(".")-1)+1);name=this.prefix_cookie+name;if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1E3);var expires="; expires="+date.toGMTString()}else var expires="";if(typeof value!=="undefined")if(typeof url==="undefined")document.cookie=name+"="+value+expires+";domain=."+defaultDomain+";path=/";else document.cookie=name+"="+
value+expires+";domain=."+url+"; path=/"},setCookieSite:function(name,value,days){var hostname=document.location.hostname;var url=document.domain;if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1E3);var expires="; expires="+date.toGMTString()}else var expires="";if(typeof value!=="undefined")document.cookie=name+"="+value+expires+";domain="+url+"; path=/"},getCookie:function(name){name=this.prefix_cookie+name;var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<
ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null},deleteCookie:function(name){this.setCookie(name,"",-1)},_reset_user:function(){var self=this;self.notifycount=0;self.notifyoffset=0;self.deleteCookie("user_id");self.profile={};clearTimeout(self.timeoutprofile);$("#myvne_taskbar").empty();self._html_taskbar_not_login()},_set_user:function(){var self=this;self.setCookie("user_id",self.profile.user_id,
365);self.setCookieSite("fosp_aid",self.profile.user_id,1);window.vne_myvne_id=self.profile.user_id;if($("#myvne_user_logged").length)self._reload_profile();else self._html_taskbar_profile()},_reload_profile:function(){var self=this;var checkAvatasrc=self.profile.user_avatar.indexOf("/src/");var urlAvata=checkAvatasrc>10?this.replaceAvatar(self.profile.user_avatar,"/c60x60/"):self.profile.user_avatar;if(urlAvata.indexOf("/img_60x60.gif")>0){var imgAvata=self.profile.user_email.charAt(0);if(self.profile.user_fullname&&
self.profile.user_fullname.length>0)imgAvata=self.profile.user_fullname.charAt(0)}else var imgAvata='<img src="'+urlAvata+'" width="25" height="25" alt="">';var fullname=self.profile.user_fullname?self.profile.user_fullname:self.profile.user_email.substring(0,self.profile.user_email.lastIndexOf("@"));var myvne_taskbar='<span class="avatar_inner">'+imgAvata+'</span>            <span class="name_user_av">'+fullname+"</span>";$("#myvne_avatar_taskbar").html(myvne_taskbar);if(self.notifycount>0)$("#myvne_notify_area").html('<span class="badged" id="myvne_notify_count">'+
self.notifycount+"</span>")},_get_message:function(code){var msg="";switch(code){case "system_error":msg="\u0110\u00e3 c\u00f3 l\u1ed7i h\u1ec7 th\u1ed1ng. Vui l\u00f2ng th\u1eed l\u1ea1i";break}return msg},_redirect:function(url){window.location=url},authentication:function(callback,form){var self=this;if(myvne_users.getCookie("user_id")==null){self.unsetCallback("authen");self.setCallback("authen",callback);switch(form){case "member":self._html_popup_login();break;case "register":self._html_popup_register();
break;default:self._html_popup_guest();break}}else self.runcallback(callback,self.profile);return false},runcallback:function(callback,datareturn){if(callback)if(typeof callback==="function")callback.call(this,datareturn);else if(typeof callback=="string")if(typeof window[callback]=="function")window[callback](datareturn);self.callback="";return false},widgetgetuser:function(arrUserId,callback){var self=this;if(!callback)callback="";if(arrUserId)$.ajax({type:"get",dataType:"jsonp",jsonpCallback:callback,
data:{myvne_users_id:arrUserId},url:self.myvne_url+"/apifrontend/getusersprofile",success:function(data){if(data.error==0);else console.log(data.message)},error:function(data,code){console.log(self._get_message("system_error"))}})},replaceAvatar:function(src,size){var urlAvata=src.replace("/src/",size);return urlAvata},resend_mail_register:function(email){var self=this;$("#resendemail_success").remove();$("#resendemail").attr("style","display:none");$("#resendemail_loadding").removeAttr("style");
$.ajax({type:"post",dataType:"json",url:self.myvne_url+"/authen/users/resendemail",data:{myvne_email:email},success:function(data){if(data.error==0){$("#resendemail").append('<p class="width_common tit_box mt15" id="resendemail_success">G\u1eedi l\u1ea1i th\u00e0nh c\u00f4ng</p>');setTimeout(function(){$("#resendemail_success").remove()},3E3);$("#resendemail").removeAttr("style");$("#resendemail_loadding").attr("style","display:none")}else{$("#resendemail").removeAttr("style");$("#resendemail").addClass("tit_box_error").html("<p>"+
data.message+"</p>")}},error:function(data,code){alert(self._get_message("system_error"))}});return false},anonymous:function(){var self=this;$.magnificPopup.instance.close();self.processCallback("anonymous");self.setCookie("anonymous","anonymous",5)},_html_popup_close:function(){$.magnificPopup.close()},_html_popup_rule:function(){$.magnificPopup.instance.close();var self=this;$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log">'+'<div class="mfp-close"></div>'+
'<iframe class="mfp-iframe iframe_register" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/authen/users/rule"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:false,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})},afterClose:function(){self._html_popup_register()}}})},_html_popup_register_comment:function(name,email){$("body").append('<div id="myvne_create_account" style="position: fixed; right: 30px; bottom: 0; z-index: 9999; background: #fff;"><iframe width="320" height="420" id="iframe_register" class="mfp-iframe iframe_register" frameborder="0" allowfullscreen="" src="'+
myvne_users.myvne_url+"/authen/users/registerv2?email="+email+"&name="+name+'"></iframe></div>')},_html_popup_rulev2:function(){$.magnificPopup.instance.close();var self=this;$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe iframe_register" frameborder="0" allowfullscreen></iframe>'+"</div></div>"},items:{src:self.myvne_url+"/authen/users/rule"},mainClass:"mfp-with-zoom mfp-myvne"})},
_html_notify_confirm_email:function(){if(Object.keys(myvne_users.profile).length>0&&myvne_users.profile.status===0){var message_box='<div class="message_box" style="right: 35px; width: 320px; background: #fff; position: fixed; right: 80px; bottom: 0; z-index: 999; -webkit-box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); -moz-box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); font-family: Arial, Helvetica, sans-serif;">                                <span class="close_mess" onclick="closeMess()" style="width: 32px;height: 32px;background: #fff;border: 1px solid #E5E5E5;text-align: center; line-height: 32px; border-radius: 50%; cursor: pointer; position: absolute; top: -16px; right: -16px; color: #4F4F4F; font-size: 30px;">\u00d7</span>                                <div class="width_common tit_mess_box" style="color: #9F224E; font-size: 18px; font-weight: 700; padding: 10px 15px; border-bottom: 1px solid #9F224E;">Th\u00f4ng b\u00e1o</div>                                <div class="width_common content_mess" style="padding: 15px; font-size: 15px;">                                    <p class="notice_p" style="line-height: 24px; margin-bottom: 20px;"><strong>M\u1eddi x\u00e1c th\u1ef1c email</strong><br>                                        \u0110\u00ea\u0309 \u0111a\u0309m ba\u0309o an toa\u0300n cho ta\u0300i khoa\u0309n va\u0300 co\u0301 th\u00ea\u0309 l\u00e2\u0301y la\u0323i m\u00e2\u0323t kh\u00e2\u0309u b\u0103\u0300ng email.                                    </p>                                    <p class="email_xt" style="color: #076DB6; font-weight: 700; max-width: 100%; overflow: hidden; text-overflow: ellipsis; text-align: center; white-space: nowrap; line-height: 24px; margin-bottom: 20px;">'+
myvne_users.profile.user_email+'</p>                                    <div class="item_input_log item_button_act">                                        <button class="pri_button btn_log has_transition" data-email="'+myvne_users.profile.user_email+'" id="home_resendemail">X\u00e1c th\u1ef1c ngay</button>                                    </div>                                </div>                            </div>';var expired_notify=this.getCookie("expired_notify");var count_notify=this.getCookie("count_notify");
var tmp_notify=this.getCookie("tmp_notify");if(typeof count_notify!=="undefined"&&count_notify!=null)if(!expired_notify){this.setCookie("tmp_notify",0,30);if(count_notify===1){this.setCookie("expired_notify",1,1);this.setCookie("count_notify",2,30);$(document.body).append(message_box)}else if(count_notify===2){this.setCookie("expired_notify",1,7);this.setCookie("count_notify",3,30);$(document.body).append(message_box)}else if(count_notify===3){this.setCookie("expired_notify",1,14);this.setCookie("count_notify",
4,30);$(document.body).append(message_box)}else if(count_notify===4)this.setCookie("count_notify",999,30)}else{if(tmp_notify==0)$(document.body).append(message_box)}else{this.setCookie("expired_notify",1,1);this.setCookie("count_notify",1,30);this.setCookie("tmp_notify",0,30);$(document.body).append(message_box)}}$(document).on("click","#home_resendemail",function(){myvne_users.setCookie("tmp_notify",1,30);$(".message_box").hide();var email_resend=$(this).data("email");$.ajax({type:"post",dataType:"json",
url:myvne_users.myvne_url+"/authen/users/resendemail",data:{myvne_email:email_resend},success:function(data){if(data.error==0){var title="X\u00e1c th\u1ef1c email";var link_gg="";if(email_resend.indexOf("gmail")>-1)link_gg='<a href="https://mail.google.com/mail/u/0/?tab=rm#search/vnexpress" target="_blank">'+'<span style="width: 13px;height: 13px;display: inline-block;color: #ccc;fill: currentColor;margin-left: 4px;">\n'+'<svg id="new-tab" viewBox="0 0 32 32" width="100%" height="100%"><title>new-tab</title><path d="M21.647 3.765c-1.040 0-1.883-0.843-1.883-1.883s0.843-1.882 1.883-1.882h8.471c1.039 0 1.882 0.844 1.882 1.882v8.471c0 1.039-0.843 1.882-1.882 1.882s-1.882-0.843-1.882-1.882v-3.927l-10.905 10.904c-0.735 0.735-1.927 0.735-2.662 0s-0.735-1.927 0-2.662l10.904-10.904h-3.927zM28.235 17.883c0-1.040 0.843-1.882 1.882-1.882s1.882 0.843 1.882 1.882v12.235c0 1.039-0.843 1.882-1.882 1.882h-28.235c-1.039 0-1.882-0.843-1.882-1.882v-28.235c0-1.039 0.843-1.882 1.882-1.882h12.235c1.040 0 1.883 0.843 1.883 1.882s-0.843 1.883-1.883 1.883h-10.352v24.47h24.47v-10.353z"></path></svg>'+
"</span></a>";var msg='<div class="width_common block_log block_log_onlytext">                                                <div class="width_common tit_box">                                                    <p>Ki\u1ec3m tra email </p>                                                    <p class="mt5">'+email_resend+link_gg+'</p>                                                    <p class="mt5">\u0110\u1ec3 x\u00e1c th\u1ef1c email tr\u00ean l\u00e0 c\u1ee7a b\u1ea1n</p>                                                    <p class="mt5">H\u00e3y nh\u1edb ki\u1ec3m tra h\u00f2m th\u01b0 r\u00e1c</p>                                                </div>                                                <div class="width_common tit_box mt40" id="resendemail">                                                    <p><a href="javascript:;" class="underline" onclick="myvne_users.resend_mail_register(\''+
email_resend+'\')">G\u1eedi l\u1ea1i email</a></p>                                                </div>                                                <div style="display: none" class="width_common tit_box mt40" id="resendemail_loadding">\u0110ang g\u1eedi ...</div>                                            </div>';myvne_users._html_popup_success(msg,title)}else alert(data.message)}});return false})}};function MyvneCallback(data){}
$(document).ready(function(){setTimeout(function(){myvne_users._html_notify_confirm_email();if(typeof myvne_users.action!=="undefined"&&myvne_users.action==="error"&&typeof myvne_users.message!=="undefined")myvne_users._html_popup_success(myvne_users.message)},3E3)});function closeMess(){myvne_users.setCookie("tmp_notify",1,30);$(".message_box").remove()};