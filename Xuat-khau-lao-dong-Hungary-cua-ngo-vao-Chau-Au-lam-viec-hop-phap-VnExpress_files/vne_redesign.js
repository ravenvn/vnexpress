var myvne_plugins={API3_IS_READ:0,html_no_save:'<a href="javascript:void(0);" class="save"><svg class="ic ic-save-outline"><use xlink:href="#Save-1"></use></svg>L\u01b0u</a>',html_save:'<a href="javascript:void(0);" class="save active"><svg class="ic ic-save-outline"><use xlink:href="#Save"></use></svg>L\u01b0u</a>',html_no_save_social:'<a href="javascript:void(0);" class="social_save flexbox"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',html_save_social:'<a href="javascript:void(0);" class="social_save flexbox active"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',
html_no_save_social_v:'<a href="javascript:void(0);" class="circle_s flexbox luutin"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',html_save_social_v:'<a href="javascript:void(0);" class="circle_s flexbox luutin active"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',html_save_gocnhin:'<a title="\u0110\u00e3 l\u01b0u" href="javascript:;"><span class="icon_savebaiviet"></span><span><i class="ic ic-bookmark" style="display: none;"></i>\u0110\u00e3 l\u01b0u</span></a>',
checking:0,checkingLimit:0,getCookie:function(name){name=this.prefix_cookie+name;var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null},initButton:function(){var _self=this;var user_id=getCookie("myvne_user_id");var css='.lds-hourglass:after{content:" ";display:block;border-radius:50%;width:0;height:0;margin:3px;box-sizing:border-box;border:12px solid #757575;border-color:#757575 #fff #757575 #fff;animation:lds-hourglass 5s infinite}@keyframes lds-hourglass{0%{transform:rotate(0);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}50%{transform:rotate(900deg);animation-timing-function:cubic-bezier(.215,.61,.355,1)}100%{transform:rotate(1800deg)}}';
$("head").append("<style type='text/css'>"+css+"</style>");if(!user_id||isNaN(parseInt(user_id))===true){$(".social_pin .myvne_save_for_later").addClass("border").html(_self.html_no_save_social);$(".social-com .myvne_save_for_later, .social .myvne_save_for_later").addClass("border").html(_self.html_no_save_social_v)}$(".footer-content .myvne_save_for_later").html(_self.html_no_save);$(".meta .myvne_save_for_later").html(_self.html_save_gocnhin)},check:function(){var _self=this;myvne_users.getProfileData(function(profile){if(typeof profile!=
"undefined"&&profile.user_email&&_self.checking===0){_self.checkingLimit=_self.checkingLimit+1;_self.checking=1;var arr_article_id=new Array;$(".myvne_save_for_later").each(function(index){var article=$(this).attr("data-article-id").trim();if(parseInt(article)>0&&arr_article_id.indexOf(article)<=-1)arr_article_id.push(article)});article_id=arr_article_id.join(",");if(profile.user_id&&article_id&&_self.API3_IS_READ==0){var data={type:"check_user",app_id:"bd20c",user_id:profile.user_id,article_id:article_id,
check:"article_save"};$.ajax({type:"GET",dataType:"json",data:data,url:"//api3.vnexpress.net/api/article",success:function(respon){$.each(arr_article_id,function(index,article_id){var els=$('.social_pin .myvne_save_for_later[data-article-id="'+article_id+'"]');var eln=$('.social-com .myvne_save_for_later[data-article-id="'+article_id+'"], .social .myvne_save_for_later[data-article-id="'+article_id+'"]');var elf=$('.footer-content .myvne_save_for_later[data-article-id="'+article_id+'"]');var eltablet=
$('.box-head-tablet .myvne_save_for_later[data-article-id="'+article_id+'"]');var elgocnhin=$('.meta .myvne_save_for_later[data-article-id="'+article_id+'"]');if(respon.error==0&&respon.data.article_save[article_id]==1){els.html(_self.html_save_social);eln.html(_self.html_save_social_v);elf.html(_self.html_save);eltablet.html(_self.html_save_social_v);els.addClass("saved");eln.addClass("saved");elf.addClass("saved");eltablet.addClass("saved");elgocnhin.addClass("active")}else{els.html(_self.html_no_save_social);
eln.html(_self.html_no_save_social_v);elf.html(_self.html_no_save);eltablet.html(_self.html_no_save_social_v)}els.addClass("border")});_self.checking=1},error:function(data,code){_self.checking=0}})}setTimeout(function(){_self.check()},6E4)}else if(_self.checkingLimit<5){_self.checkingLimit=_self.checkingLimit+1;setTimeout(function(){_self.check()},3E3)}})},saving:0,save:function(){var _self=this;_self.check();$(document).on("click",".myvne_save_for_later",function(){_self.API3_IS_READ=1;var article_id=
$(this).attr("data-article-id");var token_key=$(this).attr("data-token");var _selfButton=$(this);if(typeof myvne_users=="object"&&typeof myvne_users.authentication=="function"&&_self.saving===0){myvne_users.authentication(function(profile){var hostname=location.host==="vnexpress.net"?"vnexpress.net":location.host;if(!profile.user_email||!profile.user_id){myvne_users._html_popup_login();return false}else _self.saving=1;var data={};data.user_id=profile.user_id;data.article_id=article_id;data.token_key=
token_key;data.user_session=profile.user_session;if(_selfButton.hasClass("saved")||_selfButton.hasClass("active")){data.saveaction="unsave";$.ajax({type:"GET",dataType:"jsonp",data:data,url:"//"+hostname+"/api/myvnesubmit",success:function(data){if(data.error==0){$('.social_pin .myvne_save_for_later[data-article-id="'+article_id+'"]').removeClass("saved").html(_self.html_no_save_social);$('.social-com .myvne_save_for_later[data-article-id="'+article_id+'"], .social .myvne_save_for_later[data-article-id="'+
article_id+'"], .box-head-tablet .myvne_save_for_later[data-article-id="'+article_id+'"]').removeClass("saved").html(_self.html_no_save_social_v);$('.footer-content .myvne_save_for_later[data-article-id="'+article_id+'"]').removeClass("saved").html(_self.html_no_save);$('.meta .myvne_save_for_later[data-article-id="'+article_id+'"]').removeClass("active").html(_self.html_save_gocnhin)}else myvne_users._html_popup_success("B\u1ecf l\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");
_self.saving=0},error:function(data,code){myvne_users._html_popup_success("B\u1ecf l\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");_self.saving=0}})}else $.ajax({type:"GET",dataType:"jsonp",data:data,url:"//"+hostname+"/api/myvnesubmit",success:function(data){if(data.error==0){$('.social_pin .myvne_save_for_later[data-article-id="'+article_id+'"]').addClass("saved").html(_self.html_save_social);$('.social-com .myvne_save_for_later[data-article-id="'+
article_id+'"], .social .myvne_save_for_later[data-article-id="'+article_id+'"], .box-head-tablet .myvne_save_for_later[data-article-id="'+article_id+'"]').addClass("saved").html(_self.html_save_social_v);$('.footer-content .myvne_save_for_later[data-article-id="'+article_id+'"]').addClass("saved").html(_self.html_save);$('.meta .myvne_save_for_later[data-article-id="'+article_id+'"]').addClass("active").html(_self.html_save_gocnhin);dataLayer.push({event:"socialEvent",social_action:"save article"})}else myvne_users._html_popup_success("L\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");
_self.saving=0},error:function(data,code){myvne_users._html_popup_success("L\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");_self.saving=0}})},"member");setTimeout(function(){_self.saving=0},1E4)}else if(_self.saving===1)myvne_users._html_popup_success("Sau 10 gi\u00e2y b\u1ea1n m\u1edbi c\u00f3 th\u1ec3 th\u1ef1c hi\u1ec7n h\u00e0nh \u0111\u1ed9ng n\u00e0y.")})},run:function(){var _self=this;_self.initButton();var cycle=setInterval(function(){if(typeof myvne_users!=
"undefined"){clearInterval(cycle);_self.check();_self.save()}},1E3);setTimeout(function(){if(typeof cycle!="undefined"||cycle!=null)clearInterval(cycle)},6E4)}};